# Color output

zstyle ':prezto:*:*' color 'yes'

# Load Modules

zstyle ':prezto:load' pmodule \
  'completion' \
  'editor' \
  'environment' \
  'fasd' \
  'git' \
  'history-substring-search' \
  'node' \
  'osx' \
  'syntax-highlighting' \
  'prompt'

# Module Settings

zstyle ':prezto:module:editor' key-bindings 'vi'
zstyle ':prezto:module:editor' dot-expansion 'yes'
zstyle ':prezto:module:prompt' theme 'sorin'

# Browser

if [[ "$OSTYPE" == darwin* ]]; then
  export BROWSER='open'
fi
#
# Docker

export DOCKER_HOST=tcp://127.0.0.1:2375

# Docker

export DOCKER_HOST=tcp://192.168.59.103:2376
export DOCKER_CERT_PATH=/Users/bentruyman/.boot2docker/certs/boot2docker-vm
export DOCKER_TLS_VERIFY=1

# Editors

export EDITOR='vim'
export VISUAL='vim'
export PAGER='less'

# Language

if [[ -z "$LANG" ]]; then
  export LANG='en_US.UTF-8'
fi

# Less

export LESS='-F -g -i -M -R -S -w -X -z-4'

if (( $#commands[(i)lesspipe(|.sh)] )); then
  export LESSOPEN="| /usr/bin/env $commands[(i)lesspipe(|.sh)] %s 2>&-"
fi

# Miscellaneous

alias bs='~/dotfiles/bootstrap.sh && source ~/.zshrc'
alias fs='stat -f '%z bytes''
alias ga='git add -Av'
alias gd='git diff'
alias gdc='git diff --cached'
alias gst='git status'
alias l='ls -al'
alias md='mkdir -p $argv; cd $argv'
alias tma='tmux attach -t'
alias tmk='tmux kill-session -t'
alias tml='tmux list-sessions'
tmn() {
  if [ ! -z $argv ]; then
    name=$argv
  else
    name=$(basename $(pwd) | sed 's/^\.//')
  fi
  echo $name

  tmux new -s "$name"
}
alias vclean='rm $HOME/.vim/swaps/*'

# Node.js

$HOME/.nvm/nvm.sh

npms() {
  npm search --registry=https://registry.npmjs.org $argv
}

npm-stable() {
  npms $argv | grep -E '2014-[0-9]{2}-[0-9]{2}' | grep -E '[1-9]+\.[0-9]+\.[0-9]+' | sed -e 's/ *$//'
}

# OSX-specific
if [ $(uname -s) = 'Darwin' ]; then
  alias brewup='brew update; and brew upgrade'
  alias dsstore='find . -name "*.DS_Store" -type f -ls -delete'
  alias o='open .'
fi

# Paths

typeset -gU cdpath fpath mailpath path

path=(
  $HOME/bin
  /usr/local/bin
  $path
)

# Temporary Files

if [[ ! -d "$TMPDIR" ]]; then
  export TMPDIR="/tmp/$LOGNAME"
  mkdir -p -m 700 "$TMPDIR"
fi

TMPPREFIX="${TMPDIR%/}/zsh"
